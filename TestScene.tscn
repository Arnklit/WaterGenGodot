[gd_scene load_steps=16 format=2]

[ext_resource path="res://addons/river_tool/river_manager.gd" type="Script" id=1]
[ext_resource path="res://test_assets/tdata/data.hterrain" type="Resource" id=2]
[ext_resource path="res://addons/zylann.hterrain/hterrain.gd" type="Script" id=3]
[ext_resource path="res://test_assets/dirt_alb_bump.png" type="Texture" id=4]
[ext_resource path="res://test_assets/dirt_nor_rough.png" type="Texture" id=5]
[ext_resource path="res://test_assets/riverbed_nor_rough.png" type="Texture" id=6]
[ext_resource path="res://test_assets/riverbed_alb_bump.png" type="Texture" id=7]
[ext_resource path="res://addons/river_tool/waves.png" type="Texture" id=8]
[ext_resource path="res://addons/river_tool/river.shader" type="Shader" id=9]

[sub_resource type="Curve3D" id=1]
_data = {
"points": PoolVector3Array( -3.31742, 1.56044, -0.969166, 3.31742, -1.56044, 0.969166, -9.65518, 2.37832, -0.175081, -1.57495, 0.465966, -0.0388737, 1.57495, -0.465966, 0.0388737, -2.68471, -0.341387, 1.19917, -1.84323, 0.556605, -0.471498, 1.84323, -0.556605, 0.471498, 4.04392, -2.60746, 1.965, -1.32024, 0.326841, -1.10997, 1.32024, -0.326841, 1.10997, 10.31, -4.01284, 5.67662, -1.31891, 1.61507, -1.92695, 1.31891, -1.61507, 1.92695, 15.2247, -7.85101, 11.4431 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0 )
}

[sub_resource type="ShaderMaterial" id=2]
shader = ExtResource( 9 )
shader_param/albedo = Color( 0.411765, 0.4, 0.368627, 0.439216 )
shader_param/roughness = 0.116
shader_param/refraction = 0.05
shader_param/absorption = 0.427
shader_param/normal_scale = 1.0
shader_param/flow_speed = 1.0
shader_param/texture_normal = ExtResource( 8 )

[sub_resource type="ArrayMesh" id=3]
surfaces/0 = {
"aabb": AABB( -10.1764, -7.85101, -2.61701, 27.8331, 10.2293, 16.0271 ),
"array_data": PoolByteArray( 189, 210, 34, 193, 101, 54, 24, 64, 27, 20, 17, 64, 47, 117, 10, 0, 26, 0, 132, 127, 0, 0, 0, 0, 0, 0, 0, 0, 127, 36, 18, 193, 101, 54, 24, 64, 41, 125, 39, 192, 49, 116, 8, 0, 22, 0, 132, 127, 0, 60, 0, 0, 0, 56, 0, 0, 148, 96, 243, 192, 191, 191, 162, 63, 73, 254, 68, 64, 47, 117, 8, 0, 22, 0, 132, 127, 0, 0, 0, 60, 0, 0, 0, 56, 127, 36, 18, 193, 101, 54, 24, 64, 41, 125, 39, 192, 49, 116, 8, 0, 22, 0, 132, 127, 0, 60, 0, 0, 0, 0, 0, 56, 142, 247, 215, 192, 191, 191, 162, 63, 155, 158, 5, 192, 46, 117, 7, 0, 20, 0, 131, 127, 0, 60, 0, 60, 0, 56, 0, 0, 148, 96, 243, 192, 191, 191, 162, 63, 73, 254, 68, 64, 47, 117, 8, 0, 22, 0, 132, 127, 0, 0, 0, 60, 0, 56, 0, 56, 148, 96, 243, 192, 191, 191, 162, 63, 73, 254, 68, 64, 47, 117, 8, 0, 22, 0, 132, 127, 0, 0, 0, 60, 0, 0, 0, 56, 142, 247, 215, 192, 191, 191, 162, 63, 155, 158, 5, 192, 46, 117, 7, 0, 20, 0, 131, 127, 0, 60, 0, 60, 0, 56, 0, 56, 198, 150, 160, 192, 209, 117, 142, 62, 118, 146, 109, 64, 42, 119, 6, 0, 19, 0, 131, 127, 0, 0, 0, 64, 0, 0, 0, 60, 142, 247, 215, 192, 191, 191, 162, 63, 155, 158, 5, 192, 46, 117, 7, 0, 20, 0, 131, 127, 0, 60, 0, 60, 0, 0, 0, 60, 238, 120, 134, 192, 209, 117, 142, 62, 112, 146, 214, 191, 40, 120, 6, 0, 18, 0, 131, 127, 0, 60, 0, 64, 0, 56, 0, 56, 198, 150, 160, 192, 209, 117, 142, 62, 118, 146, 109, 64, 42, 119, 6, 0, 19, 0, 131, 127, 0, 0, 0, 64, 0, 56, 0, 60, 198, 150, 160, 192, 209, 117, 142, 62, 118, 146, 109, 64, 42, 119, 6, 0, 19, 0, 131, 127, 0, 0, 0, 64, 0, 0, 0, 0, 238, 120, 134, 192, 209, 117, 142, 62, 112, 146, 214, 191, 40, 120, 6, 0, 18, 0, 131, 127, 0, 60, 0, 64, 0, 0, 0, 0, 6, 142, 23, 192, 215, 51, 18, 191, 8, 115, 128, 64, 39, 120, 5, 0, 18, 0, 131, 127, 0, 0, 0, 66, 0, 0, 0, 0, 238, 120, 134, 192, 209, 117, 142, 62, 112, 146, 214, 191, 40, 120, 6, 0, 18, 0, 131, 127, 0, 60, 0, 64, 0, 0, 0, 0, 92, 250, 196, 191, 215, 51, 18, 191, 188, 170, 199, 191, 39, 120, 6, 0, 20, 0, 131, 127, 0, 60, 0, 66, 0, 0, 0, 0, 6, 142, 23, 192, 215, 51, 18, 191, 8, 115, 128, 64, 39, 120, 5, 0, 18, 0, 131, 127, 0, 0, 0, 66, 0, 0, 0, 0, 6, 142, 23, 192, 215, 51, 18, 191, 8, 115, 128, 64, 39, 120, 5, 0, 18, 0, 131, 127, 0, 0, 0, 66, 0, 0, 0, 0, 92, 250, 196, 191, 215, 51, 18, 191, 188, 170, 199, 191, 39, 120, 6, 0, 20, 0, 131, 127, 0, 60, 0, 66, 0, 0, 0, 0, 24, 221, 253, 61, 30, 40, 189, 191, 188, 184, 136, 64, 41, 119, 7, 0, 22, 0, 132, 127, 0, 0, 0, 68, 0, 0, 0, 0, 92, 250, 196, 191, 215, 51, 18, 191, 188, 170, 199, 191, 39, 120, 6, 0, 20, 0, 131, 127, 0, 60, 0, 66, 0, 0, 0, 0, 58, 182, 159, 63, 30, 40, 189, 191, 208, 150, 180, 191, 39, 120, 8, 0, 29, 0, 133, 127, 0, 60, 0, 68, 0, 0, 0, 0, 24, 221, 253, 61, 30, 40, 189, 191, 188, 184, 136, 64, 41, 119, 7, 0, 22, 0, 132, 127, 0, 0, 0, 68, 0, 0, 0, 0, 24, 221, 253, 61, 30, 40, 189, 191, 188, 184, 136, 64, 41, 119, 7, 0, 22, 0, 132, 127, 0, 0, 0, 68, 0, 0, 0, 0, 58, 182, 159, 63, 30, 40, 189, 191, 208, 150, 180, 191, 39, 120, 8, 0, 29, 0, 133, 127, 0, 60, 0, 68, 0, 0, 0, 0, 193, 233, 29, 64, 246, 1, 24, 192, 43, 145, 148, 64, 38, 120, 8, 0, 31, 0, 134, 127, 0, 0, 0, 69, 0, 0, 0, 0, 58, 182, 159, 63, 30, 40, 189, 191, 208, 150, 180, 191, 39, 120, 8, 0, 29, 0, 133, 127, 0, 60, 0, 68, 0, 0, 0, 0, 54, 189, 132, 64, 246, 1, 24, 192, 44, 6, 133, 191, 32, 122, 10, 0, 42, 0, 137, 127, 0, 60, 0, 69, 0, 0, 0, 0, 193, 233, 29, 64, 246, 1, 24, 192, 43, 145, 148, 64, 38, 120, 8, 0, 31, 0, 134, 127, 0, 0, 0, 69, 0, 0, 0, 0, 193, 233, 29, 64, 246, 1, 24, 192, 43, 145, 148, 64, 38, 120, 8, 0, 31, 0, 134, 127, 0, 0, 0, 69, 0, 0, 0, 0, 54, 189, 132, 64, 246, 1, 24, 192, 44, 6, 133, 191, 32, 122, 10, 0, 42, 0, 137, 127, 0, 60, 0, 69, 0, 0, 0, 0, 161, 195, 147, 64, 235, 123, 68, 192, 146, 183, 174, 64, 28, 123, 10, 0, 46, 0, 138, 127, 0, 0, 0, 70, 0, 0, 0, 0, 54, 189, 132, 64, 246, 1, 24, 192, 44, 6, 133, 191, 32, 122, 10, 0, 42, 0, 137, 127, 0, 60, 0, 69, 0, 0, 0, 0, 76, 185, 226, 64, 235, 123, 68, 192, 128, 250, 53, 189, 22, 124, 10, 0, 58, 0, 144, 127, 0, 60, 0, 70, 0, 0, 0, 0, 161, 195, 147, 64, 235, 123, 68, 192, 146, 183, 174, 64, 28, 123, 10, 0, 46, 0, 138, 127, 0, 0, 0, 70, 0, 0, 0, 0, 161, 195, 147, 64, 235, 123, 68, 192, 146, 183, 174, 64, 28, 123, 10, 0, 46, 0, 138, 127, 0, 0, 0, 70, 0, 0, 0, 0, 76, 185, 226, 64, 235, 123, 68, 192, 128, 250, 53, 189, 22, 124, 10, 0, 58, 0, 144, 127, 0, 60, 0, 70, 0, 0, 0, 0, 213, 98, 210, 64, 8, 80, 100, 192, 66, 158, 214, 64, 20, 124, 11, 0, 62, 0, 146, 127, 0, 0, 0, 71, 0, 0, 0, 0, 76, 185, 226, 64, 235, 123, 68, 192, 128, 250, 53, 189, 22, 124, 10, 0, 58, 0, 144, 127, 0, 60, 0, 70, 0, 0, 0, 0, 88, 166, 29, 65, 8, 80, 100, 192, 24, 187, 197, 63, 17, 125, 12, 0, 73, 0, 153, 127, 0, 60, 0, 71, 0, 0, 0, 0, 213, 98, 210, 64, 8, 80, 100, 192, 66, 158, 214, 64, 20, 124, 11, 0, 62, 0, 146, 127, 0, 0, 0, 71, 0, 0, 0, 0, 213, 98, 210, 64, 8, 80, 100, 192, 66, 158, 214, 64, 20, 124, 11, 0, 62, 0, 146, 127, 0, 0, 0, 71, 0, 0, 0, 0, 88, 166, 29, 65, 8, 80, 100, 192, 24, 187, 197, 63, 17, 125, 12, 0, 73, 0, 153, 127, 0, 60, 0, 71, 0, 0, 0, 0, 154, 247, 6, 65, 206, 107, 129, 192, 78, 50, 2, 65, 24, 123, 19, 0, 77, 0, 156, 127, 0, 0, 0, 72, 0, 0, 0, 0, 88, 166, 29, 65, 8, 80, 100, 192, 24, 187, 197, 63, 17, 125, 12, 0, 73, 0, 153, 127, 0, 60, 0, 71, 0, 0, 0, 0, 188, 155, 70, 65, 206, 107, 129, 192, 116, 95, 90, 64, 27, 121, 24, 0, 84, 0, 162, 127, 0, 60, 0, 72, 0, 0, 0, 0, 154, 247, 6, 65, 206, 107, 129, 192, 78, 50, 2, 65, 24, 123, 19, 0, 77, 0, 156, 127, 0, 0, 0, 72, 0, 0, 0, 0, 154, 247, 6, 65, 206, 107, 129, 192, 78, 50, 2, 65, 24, 123, 19, 0, 77, 0, 156, 127, 0, 0, 0, 72, 0, 0, 0, 0, 188, 155, 70, 65, 206, 107, 129, 192, 116, 95, 90, 64, 27, 121, 24, 0, 84, 0, 162, 127, 0, 60, 0, 72, 0, 0, 0, 0, 56, 220, 32, 65, 118, 137, 161, 192, 153, 164, 29, 65, 37, 115, 35, 0, 86, 0, 164, 127, 0, 0, 128, 72, 0, 0, 0, 0, 188, 155, 70, 65, 206, 107, 129, 192, 116, 95, 90, 64, 27, 121, 24, 0, 84, 0, 162, 127, 0, 60, 0, 72, 0, 0, 0, 0, 31, 223, 102, 65, 118, 137, 161, 192, 41, 232, 173, 64, 37, 114, 38, 0, 91, 0, 168, 127, 0, 60, 128, 72, 0, 0, 0, 0, 56, 220, 32, 65, 118, 137, 161, 192, 153, 164, 29, 65, 37, 115, 35, 0, 86, 0, 164, 127, 0, 0, 128, 72, 0, 0, 0, 0, 56, 220, 32, 65, 118, 137, 161, 192, 153, 164, 29, 65, 37, 115, 35, 0, 86, 0, 164, 127, 0, 0, 128, 72, 0, 0, 0, 0, 31, 223, 102, 65, 118, 137, 161, 192, 41, 232, 173, 64, 37, 114, 38, 0, 91, 0, 168, 127, 0, 60, 128, 72, 0, 0, 0, 0, 103, 235, 55, 65, 76, 131, 203, 192, 213, 5, 58, 65, 43, 109, 46, 0, 92, 0, 170, 127, 0, 0, 0, 73, 0, 0, 0, 0, 31, 223, 102, 65, 118, 137, 161, 192, 41, 232, 173, 64, 37, 114, 38, 0, 91, 0, 168, 127, 0, 60, 128, 72, 0, 0, 0, 0, 232, 34, 129, 65, 76, 131, 203, 192, 170, 158, 238, 64, 42, 109, 48, 0, 96, 0, 173, 127, 0, 60, 0, 73, 0, 0, 0, 0, 103, 235, 55, 65, 76, 131, 203, 192, 213, 5, 58, 65, 43, 109, 46, 0, 92, 0, 170, 127, 0, 0, 0, 73, 0, 0, 0, 0, 103, 235, 55, 65, 76, 131, 203, 192, 213, 5, 58, 65, 43, 109, 46, 0, 92, 0, 170, 127, 0, 0, 0, 73, 0, 0, 0, 0, 232, 34, 129, 65, 76, 131, 203, 192, 170, 158, 238, 64, 42, 109, 48, 0, 96, 0, 173, 127, 0, 60, 0, 73, 0, 0, 0, 0, 41, 175, 76, 65, 121, 59, 251, 192, 194, 143, 86, 65, 44, 107, 51, 0, 95, 0, 173, 127, 0, 0, 128, 73, 0, 0, 0, 0, 232, 34, 129, 65, 76, 131, 203, 192, 170, 158, 238, 64, 42, 109, 48, 0, 96, 0, 173, 127, 0, 60, 0, 73, 0, 0, 0, 0, 202, 64, 141, 65, 121, 59, 251, 192, 31, 158, 23, 65, 40, 109, 50, 0, 98, 0, 177, 127, 0, 60, 128, 73, 0, 0, 0, 0, 41, 175, 76, 65, 121, 59, 251, 192, 194, 143, 86, 65, 44, 107, 51, 0, 95, 0, 173, 127, 0, 0, 128, 73, 0, 0, 0, 0 ),
"array_index_data": PoolByteArray( 0, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6, 0, 7, 0, 8, 0, 9, 0, 10, 0, 11, 0, 12, 0, 13, 0, 14, 0, 15, 0, 16, 0, 17, 0, 18, 0, 19, 0, 20, 0, 21, 0, 22, 0, 23, 0, 24, 0, 25, 0, 26, 0, 27, 0, 28, 0, 29, 0, 30, 0, 31, 0, 32, 0, 33, 0, 34, 0, 35, 0, 36, 0, 37, 0, 38, 0, 39, 0, 40, 0, 41, 0, 42, 0, 43, 0, 44, 0, 45, 0, 46, 0, 47, 0, 48, 0, 49, 0, 50, 0, 51, 0, 52, 0, 53, 0, 54, 0, 55, 0, 56, 0, 57, 0, 58, 0, 59, 0, 60, 0, 61, 0, 62, 0, 63, 0, 64, 0, 65, 0 ),
"blend_shape_data": [  ],
"format": 97591,
"index_count": 66,
"material": SubResource( 2 ),
"primitive": 4,
"skeleton_aabb": [  ],
"vertex_count": 66
}

[sub_resource type="ProceduralSky" id=4]

[sub_resource type="Environment" id=5]
background_mode = 2
background_sky = SubResource( 4 )

[sub_resource type="SphereMesh" id=6]

[node name="World" type="Spatial"]

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 1, 0, 0, 0, -0.707107, 0.707107, 0, -0.707107, -0.707107, 0, 0, -5.70502 )

[node name="Path" type="Path" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 18.5165, 10.9063, 28.4656 )
curve = SubResource( 1 )

[node name="River" type="Spatial" parent="Path"]
script = ExtResource( 1 )
steps = 11
smoothness = 2.46
albedo = Color( 0.411765, 0.4, 0.368627, 0.439216 )
roughness = 0.116
texture_normal = ExtResource( 8 )
absorption = 0.427
river_width_values = [ 2.49695, 2.61818, 2.72493, 2.81764, 2.89672, 2.96267, 3.01605, 3.0576, 3.08823, 3.10912, 3.12172, 3.12784, 3.12784 ]

[node name="RiverMeshInstance" type="MeshInstance" parent="Path/River"]
mesh = SubResource( 3 )
material/0 = null

[node name="HTerrain" type="Spatial" parent="."]
script = ExtResource( 3 )
ambient_wind = 0.0
lod_scale = 2.0
map_scale = Vector3( 1, 1, 1 )
_terrain_data = ExtResource( 2 )
chunk_size = 32
collision_enabled = true
collision_layer = 1
collision_mask = 1
shader_type = "Classic4"
custom_shader = null
custom_globalmap_shader = null
shader_params/u_ground_uv_scale_per_texture = Plane( 5, 2, 20, 20 )
shader_params/u_depth_blending = true
shader_params/u_triplanar = false
shader_params/u_tile_reduction = Plane( 1, 0, 0, 0 )
shader_params/u_globalmap_blend_start = null
shader_params/u_globalmap_blend_distance = null
shader_params/u_colormap_opacity_per_texture = Plane( 1, 1, 1, 1 )
ground/albedo_bump_0 = ExtResource( 4 )
ground/normal_roughness_0 = ExtResource( 5 )
ground/albedo_bump_1 = ExtResource( 7 )
ground/normal_roughness_1 = ExtResource( 6 )
ground/albedo_bump_2 = null
ground/normal_roughness_2 = null
ground/albedo_bump_3 = null
ground/normal_roughness_3 = null

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 5 )

[node name="MeshInstance" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 16.3226, 10.4134, 29.5119 )
mesh = SubResource( 6 )
material/0 = null
